{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { isEmpty, set } from \"lodash\";\nimport { useRouter } from \"next/router\";\nimport { useState, useEffect } from \"react\";\nimport { Dashboard } from \"../components\";\nimport firebase from \"firebase/app\";\nimport initialFirebase from \"../public/firebase\";\nimport \"firebase/firestore\";\nexport default function Home() {\n  initialFirebase();\n  const router = useRouter();\n  const db = firebase.firestore();\n  const {\n    0: isProfile,\n    1: setProfile\n  } = useState({\n    type: '',\n    name: '',\n    email: '',\n    imageUrl: '',\n    account_id: ''\n  });\n  const {\n    0: billdetails,\n    1: setBilldetails\n  } = useState({\n    \"status\": 1,\n    \"message\": \"Sukses\",\n    \"data\": {\n      \"system_message\": \"SUCCESS\",\n      \"response\": {\n        \"additionaldata\": [],\n        \"billdetails\": [{\n          \"adminfee\": \"0.0\",\n          \"billid\": \"8\",\n          \"currency\": \"360\",\n          \"title\": \"TELKOMSEL 50rb - 50.149\",\n          \"totalamount\": \"50149.00\",\n          \"descriptions\": null,\n          \"body\": {\n            \"DENOM\": 50000\n          }\n        }, {\n          \"adminfee\": \"0.0\",\n          \"billid\": \"9\",\n          \"currency\": \"360\",\n          \"title\": \"TELKOMSEL 75rb - 74.050\",\n          \"totalamount\": \"74050.00\",\n          \"descriptions\": null,\n          \"body\": {\n            \"DENOM\": 75000\n          }\n        }, {\n          \"adminfee\": \"0.0\",\n          \"billid\": \"10\",\n          \"currency\": \"360\",\n          \"title\": \"TELKOMSEL 100rb - 98.264\",\n          \"totalamount\": \"98264.00\",\n          \"descriptions\": null,\n          \"body\": {\n            \"DENOM\": 100000\n          }\n        }, {\n          \"adminfee\": \"0.0\",\n          \"billid\": \"11\",\n          \"currency\": \"360\",\n          \"title\": \"TELKOMSEL 150rb - 146.600\",\n          \"totalamount\": \"146600.00\",\n          \"descriptions\": null,\n          \"body\": {\n            \"DENOM\": 150000\n          }\n        }, {\n          \"adminfee\": \"0.0\",\n          \"billid\": \"12\",\n          \"currency\": \"360\",\n          \"title\": \"TELKOMSEL 200rb - 194.900\",\n          \"totalamount\": \"194900.00\",\n          \"descriptions\": null,\n          \"body\": {\n            \"DENOM\": 200000\n          }\n        }],\n        \"billername\": \"PULSA TSEL\",\n        \"inquiryid\": \"27190993\",\n        \"paymenttype\": \"CLOSE_PAYMENT\",\n        \"responsecode\": \"0000\",\n        \"responsemsg\": \"SUCCESS\",\n        \"subscriberid\": \"081311529594\",\n        \"subscribername\": \"\"\n      },\n      \"trace\": {\n        \"session_id\": \"81215AEFADFB710C1258F79ABA1AD710.node3\",\n        \"request_date_time\": \"20190704185319\",\n        \"words\": \"779b7f8280415b568cdfd0abcc20eb8c3e18b585\",\n        \"biller_id\": \"9900002\",\n        \"account_number\": \"081311529594\",\n        \"systrace\": 1564026434,\n        \"inquiry_id\": \"27190993\"\n      }\n    }\n  });\n  const {\n    0: isSnapshot,\n    1: setSnapshot\n  } = useState([]);\n  const {\n    0: show,\n    1: setShow\n  } = useState(false);\n  const {\n    0: form,\n    1: setForm\n  } = useState({\n    id: '',\n    car: '',\n    color: '',\n    isLoad: false\n  });\n  useEffect(() => {\n    if (isEmpty(window.localStorage.getItem('isToken'))) {\n      router.push('/login');\n    } else {\n      setProfile(JSON.parse(window.localStorage.getItem('isProfile')));\n    }\n  }, []);\n  db.collection('cars').get().then(snapshot => {\n    setSnapshot(snapshot);\n  });\n\n  const handleShow = doc => {\n    setShow(true);\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      id: doc.id,\n      car: doc.car,\n      color: doc.color\n    }));\n  };\n\n  const handleClose = () => {\n    setShow(false);\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      id: '',\n      car: '',\n      color: ''\n    }));\n  };\n\n  const handleLogout = () => {\n    window.localStorage.removeItem('isToken');\n    window.localStorage.removeItem('isProfile');\n    router.push('/login');\n  };\n\n  const handleAddNewCar = event => {\n    event.preventDefault();\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      isLoad: true\n    }));\n    db.collection('cars').add(form).then(() => {\n      setForm({\n        car: '',\n        color: '',\n        isLoad: false\n      });\n    });\n  };\n\n  const handleDeleteCar = id => {\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      isLoad: true\n    }));\n    db.collection('cars').doc(id).delete().then(() => {\n      setForm(_objectSpread(_objectSpread({}, form), {}, {\n        isLoad: false\n      }));\n    });\n  };\n\n  const handleUpdateCar = () => {\n    setForm(_objectSpread(_objectSpread({}, form), {}, {\n      isLoad: true\n    }));\n    db.collection('cars').doc(form.id).update({\n      id: form.id,\n      car: form.car,\n      color: form.color\n    }).then(() => {\n      setShow(false);\n      setForm(_objectSpread(_objectSpread({}, form), {}, {\n        isLoad: false\n      }));\n    });\n  };\n\n  return __jsx(Dashboard, {\n    form: form,\n    show: show,\n    setForm: setForm,\n    isProfile: isProfile,\n    handleShow: handleShow,\n    isSnapshot: isSnapshot,\n    handleClose: handleClose,\n    handleLogout: handleLogout,\n    handleAddNewCar: handleAddNewCar,\n    handleDeleteCar: handleDeleteCar,\n    handleUpdateCar: handleUpdateCar,\n    billdetails: billdetails.data.response.billdetails\n  });\n}","map":null,"metadata":{},"sourceType":"module"}